{"ast":null,"code":"import { catchError, EMPTY, map, of, switchMap, take, tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/sauces.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/auth.service\";\n\nfunction SingleSauceComponent_mat_spinner_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\n\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"fas liked\": a0,\n    \"far\": a1,\n    \"disabled\": a2\n  };\n};\n\nconst _c1 = function (a0, a1, a2) {\n  return {\n    \"fas disliked\": a0,\n    \"far\": a1,\n    \"disabled\": a2\n  };\n};\n\nfunction SingleSauceComponent_div_1_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14)(2, \"i\", 15);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_div_11_Template_i_click_2_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.onLike();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 16)(6, \"i\", 17);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_div_11_Template_i_click_6_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.onDislike();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const sauce_r2 = i0.ɵɵnextContext().ngIf;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(4, _c0, ctx_r3.liked, !ctx_r3.liked, ctx_r3.disliked));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(sauce_r2.likes);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(8, _c1, ctx_r3.disliked, !ctx_r3.disliked, ctx_r3.liked));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(sauce_r2.dislikes);\n  }\n}\n\nfunction SingleSauceComponent_div_1_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"mat-spinner\", 19);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SingleSauceComponent_div_1_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.onModify();\n    });\n    i0.ɵɵtext(1, \"MODIFY\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SingleSauceComponent_div_1_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.onDelete();\n    });\n    i0.ɵɵtext(1, \"DELETE\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SingleSauceComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelement(1, \"img\", 3);\n    i0.ɵɵelementStart(2, \"div\", 4)(3, \"h1\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 6);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h3\");\n    i0.ɵɵtext(8, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, SingleSauceComponent_div_1_div_11_Template, 9, 12, \"div\", 7);\n    i0.ɵɵtemplate(12, SingleSauceComponent_div_1_div_12_Template, 2, 0, \"div\", 8);\n    i0.ɵɵelementStart(13, \"div\", 9)(14, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.onBack();\n    });\n    i0.ɵɵtext(15, \"BACK\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, SingleSauceComponent_div_1_button_16_Template, 2, 0, \"button\", 11);\n    i0.ɵɵtemplate(17, SingleSauceComponent_div_1_button_17_Template, 2, 0, \"button\", 12);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const sauce_r2 = ctx.ngIf;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", sauce_r2 == null ? null : sauce_r2.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(sauce_r2 == null ? null : sauce_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"by \", sauce_r2 == null ? null : sauce_r2.manufacturer, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(sauce_r2.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.likePending);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.likePending);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.userId === sauce_r2.userId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.userId === sauce_r2.userId);\n  }\n}\n\nexport class SingleSauceComponent {\n  constructor(sauces, route, auth, router) {\n    this.sauces = sauces;\n    this.route = route;\n    this.auth = auth;\n    this.router = router;\n  }\n\n  ngOnInit() {\n    this.userId = this.auth.getUserId();\n    this.loading = true;\n    this.userId = this.auth.getUserId();\n    this.sauce$ = this.route.params.pipe(map(params => params['id']), switchMap(id => this.sauces.getSauceById(id)), tap(sauce => {\n      this.loading = false;\n\n      if (sauce.usersLiked.find(user => user === this.userId)) {\n        this.liked = true;\n      } else if (sauce.usersDisliked.find(user => user === this.userId)) {\n        this.disliked = true;\n      }\n    }));\n  }\n\n  onLike() {\n    if (this.disliked) {\n      return;\n    }\n\n    this.likePending = true;\n    this.sauce$.pipe(take(1), switchMap(sauce => this.sauces.likeSauce(sauce._id, !this.liked).pipe(tap(liked => {\n      this.likePending = false;\n      this.liked = liked;\n    }), map(liked => Object.assign(Object.assign({}, sauce), {\n      likes: liked ? sauce.likes + 1 : sauce.likes - 1\n    })), tap(sauce => this.sauce$ = of(sauce))))).subscribe();\n  }\n\n  onDislike() {\n    if (this.liked) {\n      return;\n    }\n\n    this.likePending = true;\n    this.sauce$.pipe(take(1), switchMap(sauce => this.sauces.dislikeSauce(sauce._id, !this.disliked).pipe(tap(disliked => {\n      this.likePending = false;\n      this.disliked = disliked;\n    }), map(disliked => Object.assign(Object.assign({}, sauce), {\n      dislikes: disliked ? sauce.dislikes + 1 : sauce.dislikes - 1\n    })), tap(sauce => this.sauce$ = of(sauce))))).subscribe();\n  }\n\n  onBack() {\n    this.router.navigate(['/sauces']);\n  }\n\n  onModify() {\n    this.sauce$.pipe(take(1), tap(sauce => this.router.navigate(['/modify-sauce', sauce._id]))).subscribe();\n  }\n\n  onDelete() {\n    this.loading = true;\n    this.sauce$.pipe(take(1), switchMap(sauce => this.sauces.deleteSauce(sauce._id)), tap(message => {\n      console.log(message);\n      this.loading = false;\n      this.router.navigate(['/sauces']);\n    }), catchError(error => {\n      this.loading = false;\n      this.errorMessage = error.message;\n      console.error(error);\n      return EMPTY;\n    })).subscribe();\n  }\n\n}\n\nSingleSauceComponent.ɵfac = function SingleSauceComponent_Factory(t) {\n  return new (t || SingleSauceComponent)(i0.ɵɵdirectiveInject(i1.SaucesService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nSingleSauceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SingleSauceComponent,\n  selectors: [[\"app-single-sauce\"]],\n  decls: 3,\n  vars: 4,\n  consts: [[4, \"ngIf\"], [\"class\", \"sauce-container\", 4, \"ngIf\"], [1, \"sauce-container\"], [\"alt\", \"\", 3, \"src\"], [1, \"sauce-info\"], [1, \"sauce-name\"], [1, \"manufacturer\"], [\"class\", \"like-buttons\", 4, \"ngIf\"], [\"class\", \"like-pending\", 4, \"ngIf\"], [1, \"control-buttons\"], [\"mat-raised-button\", \"\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [1, \"like-buttons\"], [1, \"likes\"], [1, \"like\", \"fa-thumbs-up\", \"fa-lg\", 3, \"ngClass\", \"click\"], [1, \"dislikes\"], [1, \"dislike\", \"fa-thumbs-down\", \"fa-lg\", 3, \"ngClass\", \"click\"], [1, \"like-pending\"], [1, \"white-spinner\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"]],\n  template: function SingleSauceComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, SingleSauceComponent_mat_spinner_0_Template, 1, 0, \"mat-spinner\", 0);\n      i0.ɵɵtemplate(1, SingleSauceComponent_div_1_Template, 18, 8, \"div\", 1);\n      i0.ɵɵpipe(2, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx.sauce$));\n    }\n  },\n  styles: [\".sauce-container[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.sauce-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  max-height: 70vh;\\n  flex: 1;\\n}\\n.sauce-info[_ngcontent-%COMP%] {\\n  padding: 40px 20px;\\n  flex: 1;\\n}\\n.manufacturer[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.sauce-name[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.like-buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.like-buttons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  margin-right: 0.5em;\\n  cursor: pointer;\\n}\\n.likes[_ngcontent-%COMP%], .dislikes[_ngcontent-%COMP%] {\\n  margin: 0 0.4em;\\n}\\n.liked[_ngcontent-%COMP%] {\\n  color: #33db00;\\n}\\n.disliked[_ngcontent-%COMP%] {\\n  color: #db3300;\\n}\\n.like[_ngcontent-%COMP%]:hover {\\n  color: #33db00;\\n}\\n.dislike[_ngcontent-%COMP%] {\\n  transform: scaleX(-1) translateY(5px);\\n}\\n.dislike[_ngcontent-%COMP%]:hover {\\n  color: #db3300;\\n}\\n.disabled[_ngcontent-%COMP%] {\\n  cursor: none;\\n  color: #bebebe;\\n}\\n.disabled[_ngcontent-%COMP%]:hover {\\n  color: #bebebe;\\n}\\n.control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  margin: 1em 1em 0 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpbmdsZS1zYXVjZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7QUFDRjtBQUFFO0VBQ0UsZ0JBQUE7RUFDQSxPQUFBO0FBRUo7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsT0FBQTtBQUNGO0FBRUE7RUFDRSxTQUFBO0FBQ0Y7QUFFQTtFQUNFLFNBQUE7QUFDRjtBQUVBO0VBQ0UsYUFBQTtBQUNGO0FBQUU7RUFDRSxtQkFBQTtFQUNBLGVBQUE7QUFFSjtBQUVBO0VBQ0UsZUFBQTtBQUNGO0FBRUE7RUFDRSxjQUFBO0FBQ0Y7QUFFQTtFQUNFLGNBQUE7QUFDRjtBQUdFO0VBQ0UsY0FBQTtBQUFKO0FBSUE7RUFDRSxxQ0FBQTtBQURGO0FBRUU7RUFDRSxjQUFBO0FBQUo7QUFJQTtFQUNFLFlBQUE7RUFJQSxjQUFBO0FBSkY7QUFDRTtFQUNFLGNBQUE7QUFDSjtBQUtFO0VBQ0UsbUJBQUE7QUFGSiIsImZpbGUiOiJzaW5nbGUtc2F1Y2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuc2F1Y2UtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgaW1nIHtcbiAgICBtYXgtaGVpZ2h0OiA3MHZoO1xuICAgIGZsZXg6IDE7XG4gIH1cbn1cblxuLnNhdWNlLWluZm8ge1xuICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gIGZsZXg6IDE7XG59XG5cbi5tYW51ZmFjdHVyZXIge1xuICBtYXJnaW46IDA7XG59XG5cbi5zYXVjZS1uYW1lIHtcbiAgbWFyZ2luOiAwO1xufVxuXG4ubGlrZS1idXR0b25zIHtcbiAgZGlzcGxheTogZmxleDtcbiAgaSB7XG4gICAgbWFyZ2luLXJpZ2h0OiAwLjVlbTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cbn1cblxuLmxpa2VzLCAuZGlzbGlrZXMge1xuICBtYXJnaW46IDAgMC40ZW07XG59XG5cbi5saWtlZCB7XG4gIGNvbG9yOiByZ2JhKDUxLCAyMTksIDAsIDEpO1xufVxuXG4uZGlzbGlrZWQge1xuICBjb2xvcjogcmdiYSgyMTksIDUxLCAwLCAxKTtcbn1cblxuLmxpa2Uge1xuICAmOmhvdmVyIHtcbiAgICBjb2xvcjogcmdiYSg1MSwgMjE5LCAwLCAxKTtcbiAgfVxufVxuXG4uZGlzbGlrZSB7XG4gIHRyYW5zZm9ybTogc2NhbGVYKC0xKSB0cmFuc2xhdGVZKDVweCk7XG4gICY6aG92ZXIge1xuICAgIGNvbG9yOiByZ2JhKDIxOSwgNTEsIDAsIDEpO1xuICB9XG59XG5cbi5kaXNhYmxlZCB7XG4gIGN1cnNvcjogbm9uZTtcbiAgJjpob3ZlciB7XG4gICAgY29sb3I6IHJnYmEoMTkwLCAxOTAsIDE5MCwgMSk7XG4gIH1cbiAgY29sb3I6IHJnYmEoMTkwLCAxOTAsIDE5MCwgMSk7XG59XG5cbi5jb250cm9sLWJ1dHRvbnMge1xuICBidXR0b24ge1xuICAgIG1hcmdpbjogMWVtIDFlbSAwIDA7XG4gIH1cbn1cbiJdfQ== */\"]\n});","map":{"version":3,"sources":["/Users/jeremy/Documents/GitHub/Piiquante/frontend/src/app/single-sauce/single-sauce.component.ts"],"names":["catchError","EMPTY","map","of","switchMap","take","tap","i0","i1","i2","i3","SingleSauceComponent_mat_spinner_0_Template","rf","ctx","ɵɵelement","_c0","a0","a1","a2","_c1","SingleSauceComponent_div_1_div_11_Template","_r8","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","SingleSauceComponent_div_1_div_11_Template_i_click_2_listener","ɵɵrestoreView","ctx_r7","ɵɵnextContext","onLike","ɵɵelementEnd","ɵɵtext","SingleSauceComponent_div_1_div_11_Template_i_click_6_listener","ctx_r9","onDislike","sauce_r2","ngIf","ctx_r3","ɵɵadvance","ɵɵproperty","ɵɵpureFunction3","liked","disliked","ɵɵtextInterpolate","likes","dislikes","SingleSauceComponent_div_1_div_12_Template","SingleSauceComponent_div_1_button_16_Template","_r12","SingleSauceComponent_div_1_button_16_Template_button_click_0_listener","ctx_r11","onModify","SingleSauceComponent_div_1_button_17_Template","_r14","SingleSauceComponent_div_1_button_17_Template_button_click_0_listener","ctx_r13","onDelete","SingleSauceComponent_div_1_Template","_r16","ɵɵtemplate","SingleSauceComponent_div_1_Template_button_click_14_listener","ctx_r15","onBack","ctx_r1","imageUrl","ɵɵsanitizeUrl","name","ɵɵtextInterpolate1","manufacturer","description","likePending","userId","SingleSauceComponent","constructor","sauces","route","auth","router","ngOnInit","getUserId","loading","sauce$","params","pipe","id","getSauceById","sauce","usersLiked","find","user","usersDisliked","likeSauce","_id","Object","assign","subscribe","dislikeSauce","navigate","deleteSauce","message","console","log","error","errorMessage","ɵfac","SingleSauceComponent_Factory","t","ɵɵdirectiveInject","SaucesService","ActivatedRoute","AuthService","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","SingleSauceComponent_Template","ɵɵpipe","ɵɵpipeBind1","styles"],"mappings":"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","sourcesContent":["import { catchError, EMPTY, map, of, switchMap, take, tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/sauces.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/auth.service\";\nfunction SingleSauceComponent_mat_spinner_0_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n} }\nconst _c0 = function (a0, a1, a2) { return { \"fas liked\": a0, \"far\": a1, \"disabled\": a2 }; };\nconst _c1 = function (a0, a1, a2) { return { \"fas disliked\": a0, \"far\": a1, \"disabled\": a2 }; };\nfunction SingleSauceComponent_div_1_div_11_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14)(2, \"i\", 15);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_div_11_Template_i_click_2_listener() { i0.ɵɵrestoreView(_r8); const ctx_r7 = i0.ɵɵnextContext(2); return ctx_r7.onLike(); });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 16)(6, \"i\", 17);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_div_11_Template_i_click_6_listener() { i0.ɵɵrestoreView(_r8); const ctx_r9 = i0.ɵɵnextContext(2); return ctx_r9.onDislike(); });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n} if (rf & 2) {\n    const sauce_r2 = i0.ɵɵnextContext().ngIf;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(4, _c0, ctx_r3.liked, !ctx_r3.liked, ctx_r3.disliked));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(sauce_r2.likes);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(8, _c1, ctx_r3.disliked, !ctx_r3.disliked, ctx_r3.liked));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(sauce_r2.dislikes);\n} }\nfunction SingleSauceComponent_div_1_div_12_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"mat-spinner\", 19);\n    i0.ɵɵelementEnd();\n} }\nfunction SingleSauceComponent_div_1_button_16_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_button_16_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r12); const ctx_r11 = i0.ɵɵnextContext(2); return ctx_r11.onModify(); });\n    i0.ɵɵtext(1, \"MODIFY\");\n    i0.ɵɵelementEnd();\n} }\nfunction SingleSauceComponent_div_1_button_17_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_button_17_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r14); const ctx_r13 = i0.ɵɵnextContext(2); return ctx_r13.onDelete(); });\n    i0.ɵɵtext(1, \"DELETE\");\n    i0.ɵɵelementEnd();\n} }\nfunction SingleSauceComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelement(1, \"img\", 3);\n    i0.ɵɵelementStart(2, \"div\", 4)(3, \"h1\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 6);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h3\");\n    i0.ɵɵtext(8, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, SingleSauceComponent_div_1_div_11_Template, 9, 12, \"div\", 7);\n    i0.ɵɵtemplate(12, SingleSauceComponent_div_1_div_12_Template, 2, 0, \"div\", 8);\n    i0.ɵɵelementStart(13, \"div\", 9)(14, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_Template_button_click_14_listener() { i0.ɵɵrestoreView(_r16); const ctx_r15 = i0.ɵɵnextContext(); return ctx_r15.onBack(); });\n    i0.ɵɵtext(15, \"BACK\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, SingleSauceComponent_div_1_button_16_Template, 2, 0, \"button\", 11);\n    i0.ɵɵtemplate(17, SingleSauceComponent_div_1_button_17_Template, 2, 0, \"button\", 12);\n    i0.ɵɵelementEnd()()();\n} if (rf & 2) {\n    const sauce_r2 = ctx.ngIf;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", sauce_r2 == null ? null : sauce_r2.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(sauce_r2 == null ? null : sauce_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"by \", sauce_r2 == null ? null : sauce_r2.manufacturer, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(sauce_r2.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.likePending);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.likePending);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.userId === sauce_r2.userId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.userId === sauce_r2.userId);\n} }\nexport class SingleSauceComponent {\n    constructor(sauces, route, auth, router) {\n        this.sauces = sauces;\n        this.route = route;\n        this.auth = auth;\n        this.router = router;\n    }\n    ngOnInit() {\n        this.userId = this.auth.getUserId();\n        this.loading = true;\n        this.userId = this.auth.getUserId();\n        this.sauce$ = this.route.params.pipe(map(params => params['id']), switchMap(id => this.sauces.getSauceById(id)), tap(sauce => {\n            this.loading = false;\n            if (sauce.usersLiked.find(user => user === this.userId)) {\n                this.liked = true;\n            }\n            else if (sauce.usersDisliked.find(user => user === this.userId)) {\n                this.disliked = true;\n            }\n        }));\n    }\n    onLike() {\n        if (this.disliked) {\n            return;\n        }\n        this.likePending = true;\n        this.sauce$.pipe(take(1), switchMap((sauce) => this.sauces.likeSauce(sauce._id, !this.liked).pipe(tap(liked => {\n            this.likePending = false;\n            this.liked = liked;\n        }), map(liked => (Object.assign(Object.assign({}, sauce), { likes: liked ? sauce.likes + 1 : sauce.likes - 1 }))), tap(sauce => this.sauce$ = of(sauce))))).subscribe();\n    }\n    onDislike() {\n        if (this.liked) {\n            return;\n        }\n        this.likePending = true;\n        this.sauce$.pipe(take(1), switchMap((sauce) => this.sauces.dislikeSauce(sauce._id, !this.disliked).pipe(tap(disliked => {\n            this.likePending = false;\n            this.disliked = disliked;\n        }), map(disliked => (Object.assign(Object.assign({}, sauce), { dislikes: disliked ? sauce.dislikes + 1 : sauce.dislikes - 1 }))), tap(sauce => this.sauce$ = of(sauce))))).subscribe();\n    }\n    onBack() {\n        this.router.navigate(['/sauces']);\n    }\n    onModify() {\n        this.sauce$.pipe(take(1), tap(sauce => this.router.navigate(['/modify-sauce', sauce._id]))).subscribe();\n    }\n    onDelete() {\n        this.loading = true;\n        this.sauce$.pipe(take(1), switchMap(sauce => this.sauces.deleteSauce(sauce._id)), tap(message => {\n            console.log(message);\n            this.loading = false;\n            this.router.navigate(['/sauces']);\n        }), catchError(error => {\n            this.loading = false;\n            this.errorMessage = error.message;\n            console.error(error);\n            return EMPTY;\n        })).subscribe();\n    }\n}\nSingleSauceComponent.ɵfac = function SingleSauceComponent_Factory(t) { return new (t || SingleSauceComponent)(i0.ɵɵdirectiveInject(i1.SaucesService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i2.Router)); };\nSingleSauceComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SingleSauceComponent, selectors: [[\"app-single-sauce\"]], decls: 3, vars: 4, consts: [[4, \"ngIf\"], [\"class\", \"sauce-container\", 4, \"ngIf\"], [1, \"sauce-container\"], [\"alt\", \"\", 3, \"src\"], [1, \"sauce-info\"], [1, \"sauce-name\"], [1, \"manufacturer\"], [\"class\", \"like-buttons\", 4, \"ngIf\"], [\"class\", \"like-pending\", 4, \"ngIf\"], [1, \"control-buttons\"], [\"mat-raised-button\", \"\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [1, \"like-buttons\"], [1, \"likes\"], [1, \"like\", \"fa-thumbs-up\", \"fa-lg\", 3, \"ngClass\", \"click\"], [1, \"dislikes\"], [1, \"dislike\", \"fa-thumbs-down\", \"fa-lg\", 3, \"ngClass\", \"click\"], [1, \"like-pending\"], [1, \"white-spinner\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"]], template: function SingleSauceComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵtemplate(0, SingleSauceComponent_mat_spinner_0_Template, 1, 0, \"mat-spinner\", 0);\n        i0.ɵɵtemplate(1, SingleSauceComponent_div_1_Template, 18, 8, \"div\", 1);\n        i0.ɵɵpipe(2, \"async\");\n    } if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx.sauce$));\n    } }, styles: [\".sauce-container[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.sauce-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  max-height: 70vh;\\n  flex: 1;\\n}\\n.sauce-info[_ngcontent-%COMP%] {\\n  padding: 40px 20px;\\n  flex: 1;\\n}\\n.manufacturer[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.sauce-name[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.like-buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.like-buttons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  margin-right: 0.5em;\\n  cursor: pointer;\\n}\\n.likes[_ngcontent-%COMP%], .dislikes[_ngcontent-%COMP%] {\\n  margin: 0 0.4em;\\n}\\n.liked[_ngcontent-%COMP%] {\\n  color: #33db00;\\n}\\n.disliked[_ngcontent-%COMP%] {\\n  color: #db3300;\\n}\\n.like[_ngcontent-%COMP%]:hover {\\n  color: #33db00;\\n}\\n.dislike[_ngcontent-%COMP%] {\\n  transform: scaleX(-1) translateY(5px);\\n}\\n.dislike[_ngcontent-%COMP%]:hover {\\n  color: #db3300;\\n}\\n.disabled[_ngcontent-%COMP%] {\\n  cursor: none;\\n  color: #bebebe;\\n}\\n.disabled[_ngcontent-%COMP%]:hover {\\n  color: #bebebe;\\n}\\n.control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  margin: 1em 1em 0 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpbmdsZS1zYXVjZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7QUFDRjtBQUFFO0VBQ0UsZ0JBQUE7RUFDQSxPQUFBO0FBRUo7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsT0FBQTtBQUNGO0FBRUE7RUFDRSxTQUFBO0FBQ0Y7QUFFQTtFQUNFLFNBQUE7QUFDRjtBQUVBO0VBQ0UsYUFBQTtBQUNGO0FBQUU7RUFDRSxtQkFBQTtFQUNBLGVBQUE7QUFFSjtBQUVBO0VBQ0UsZUFBQTtBQUNGO0FBRUE7RUFDRSxjQUFBO0FBQ0Y7QUFFQTtFQUNFLGNBQUE7QUFDRjtBQUdFO0VBQ0UsY0FBQTtBQUFKO0FBSUE7RUFDRSxxQ0FBQTtBQURGO0FBRUU7RUFDRSxjQUFBO0FBQUo7QUFJQTtFQUNFLFlBQUE7RUFJQSxjQUFBO0FBSkY7QUFDRTtFQUNFLGNBQUE7QUFDSjtBQUtFO0VBQ0UsbUJBQUE7QUFGSiIsImZpbGUiOiJzaW5nbGUtc2F1Y2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuc2F1Y2UtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgaW1nIHtcbiAgICBtYXgtaGVpZ2h0OiA3MHZoO1xuICAgIGZsZXg6IDE7XG4gIH1cbn1cblxuLnNhdWNlLWluZm8ge1xuICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gIGZsZXg6IDE7XG59XG5cbi5tYW51ZmFjdHVyZXIge1xuICBtYXJnaW46IDA7XG59XG5cbi5zYXVjZS1uYW1lIHtcbiAgbWFyZ2luOiAwO1xufVxuXG4ubGlrZS1idXR0b25zIHtcbiAgZGlzcGxheTogZmxleDtcbiAgaSB7XG4gICAgbWFyZ2luLXJpZ2h0OiAwLjVlbTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cbn1cblxuLmxpa2VzLCAuZGlzbGlrZXMge1xuICBtYXJnaW46IDAgMC40ZW07XG59XG5cbi5saWtlZCB7XG4gIGNvbG9yOiByZ2JhKDUxLCAyMTksIDAsIDEpO1xufVxuXG4uZGlzbGlrZWQge1xuICBjb2xvcjogcmdiYSgyMTksIDUxLCAwLCAxKTtcbn1cblxuLmxpa2Uge1xuICAmOmhvdmVyIHtcbiAgICBjb2xvcjogcmdiYSg1MSwgMjE5LCAwLCAxKTtcbiAgfVxufVxuXG4uZGlzbGlrZSB7XG4gIHRyYW5zZm9ybTogc2NhbGVYKC0xKSB0cmFuc2xhdGVZKDVweCk7XG4gICY6aG92ZXIge1xuICAgIGNvbG9yOiByZ2JhKDIxOSwgNTEsIDAsIDEpO1xuICB9XG59XG5cbi5kaXNhYmxlZCB7XG4gIGN1cnNvcjogbm9uZTtcbiAgJjpob3ZlciB7XG4gICAgY29sb3I6IHJnYmEoMTkwLCAxOTAsIDE5MCwgMSk7XG4gIH1cbiAgY29sb3I6IHJnYmEoMTkwLCAxOTAsIDE5MCwgMSk7XG59XG5cbi5jb250cm9sLWJ1dHRvbnMge1xuICBidXR0b24ge1xuICAgIG1hcmdpbjogMWVtIDFlbSAwIDA7XG4gIH1cbn1cbiJdfQ== */\"] });\n"]},"metadata":{},"sourceType":"module"}